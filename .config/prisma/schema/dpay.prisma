model DpayTransaction {
  id                String   @id @default(cuid())
  casinoGroup       CasinoGroup       @relation(fields: [casinoGroupId], references: [id])
  casinoGroupId     String              // Link to CasinoGroup
  userId            String              // Your internal user ID
  userName          String              // Your internal user name
  referenceUserId   String              // Gateway's user/ref ID
  transactionNumber String?             // Set after gateway responds
  type              String              // "CASHIN" or "CASHOUT"
  amount            Float               // Transaction amount
  remarks           String?             // Any remarks you want to store
  channel           String              // Payment method/channel used
  status            String              // "INITIATED", "PENDING", "COMPLETED", "REJECTED", "CANCELLED", etc
  qbetStatus        String?             // Your internal status tracking
  paymentUrl        String?             // If gateway returns a payment URL (for CASHIN)
  rawRequest        Json                // The payload you sent to your droplet/gateway
  rawGatewayResponse Json?              // The payment gateway's create response
  rawWebhook        Json?               // Full webhook JSON from NotificationUrl callback
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model DpayConfig{
  id               String   @id @default(cuid())
  casinoGroup       CasinoGroup       @relation(fields: [casinoGroupId], references: [id])
  casinoGroupId     String          @unique    // Link to CasinoGroup

  cashinGatewayEnabled   Boolean  @default(true)
  history        DpayConfigHistory[]

  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt
}

model DpayConfigHistory{
  id               String   @id @default(cuid())
  dpayConfig       DpayConfig       @relation(fields: [dpayConfigId], references: [id])
  dpayConfigId     String              // Link to DpayConfig
  changedByUserId  String              // User who made the change
  changeSummary    String              // Summary of changes made
  changedAt        DateTime @default(now())
}